#*****************************************************************************#
#                                                                             #
#  test_codebase_dockerfile.txt                           TTTTTTTT SSSSSSS II #
#                                                            TT    SS      II #
#  By: st93642@students.tsi.lv                               TT    SSSSSSS II #
#                                                            TT         SS II #
#  Created: Sep 25 2025 14:14 Igors Oleinikovs               TT    SSSSSSS II #
#  Updated: Sep 25 2025 14:14 Igors Oleinikovs                                #
#                                                                             #
#   Transport and Telecommunication Institute - Riga, Latvia                  #
#                       https://tsi.lv                                        #
#*****************************************************************************#

# Basic Dockerfile template
# Use official Node.js runtime as base image
FROM node:16-alpine

# Set the working directory in container
WORKDIR /app

# Copy package.json and package-lock.json
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy application code
COPY . .

# Expose port
EXPOSE 3000

# Define environment variable
ENV NODE_ENV=production

# Add metadata
LABEL maintainer="TSI Student <student@tsi.lv>"
LABEL description="Basic Docker container template"

# Create non-root user for security
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001
USER nextjs

# Command to run the application
CMD ["npm", "start"]
